{
"title": "Advanced DeFi Taxation in Spain 2025: How DEX Protocols Are Taxed (Uniswap, Curve, PancakeSwap)",
"excerpt": "Decentralized exchanges (DEX) like Uniswap pose unique tax challenges: swaps, liquidity pools, farming and impermanent loss. Learn how each operation is taxed by the AEAT and avoid tax mistakes that can cost you thousands of euros.",
"content": "## What are DEX protocols and why do they complicate your tax return?\n\n**DEX protocols (Decentralized Exchanges)** such as Uniswap, PancakeSwap, Curve or SushiSwap allow you to swap cryptocurrencies without centralized intermediaries. Unlike Binance or Coinbase, these platforms are powered by smart contracts on the blockchain.\n\n**The tax problem**: Each swap on Uniswap generates a disposal of assets that must be reported. In addition, specific DeFi operations such as providing liquidity, receiving LP tokens (Liquidity Provider), doing farming or suffering impermanent loss have complex tax consequences that the AEAT does not explicitly contemplate in its regulations.\n\nAccording to the general criteria of the Spanish Tax Agency, **any crypto-to-crypto swap** —whether on a centralized or decentralized exchange— triggers a taxable event. However, DEXs introduce operations that do not exist in traditional finance, creating an interpretative gap that you must address with [specialized tax advice](/es/servicios/asesoria-fiscal).\n\n---\n\n## Definition: What is a DEX for tax purposes in Spain?\n\nA **DEX (Decentralized Exchange)** is a blockchain protocol that allows you to exchange cryptocurrencies via smart contracts, without centralized custody of funds.\n\n**Tax-relevant characteristics:**\n- **No intermediary**: You operate directly from your wallet (MetaMask, Trust Wallet, Ledger)\n- **No KYC**: You do not provide personal data, but transactions are public on the blockchain\n- **On-chain transactions**: Every operation is permanently recorded and auditable\n- **Smart contracts**: The swap is executed by automatic code, not by a company\n\n**Key tax consequence**: For the AEAT, operating on Uniswap is **tax-wise identical** to operating on Binance. There is no special treatment or exemption for using decentralized protocols. The disposal of assets generates capital gains or losses regardless of the platform used.\n\n---\n\n## Key data on DEX taxation in Spain\n\n- **Type of platform**: Decentralized exchange (no special tax treatment)\n- **Swap operation ETH → USDT on Uniswap**: Crypto-to-crypto swap that triggers a taxable event\n- **Taxation**: Savings tax base (19%-28% depending on bracket)\n- **Calculation method**: Mandatory FIFO\n- **Tax form**: Form 100 (IRPF)\n- **Gas fees (Ethereum commissions)**: Deductible from the disposal value\n- **LP tokens from liquidity pools**: Capital asset that is taxed upon disposal\n- **Impermanent loss**: Not deductible until realized when selling the position\n- **AEAT traceability**: Transactions are public on the blockchain (Etherscan, BSCScan)\n- **Form 721**: Mandatory if total crypto balance > €50,000 on December 31\n- **Statute of limitations without Form 721**: 10 years\n\n---\n\n## Types of DEX operations and their tax treatment\n\n### 1. Basic swap (simple exchange)\n\n**Operation**: Swapping one token for another on Uniswap/PancakeSwap (e.g. ETH → USDC).\n\n**Tax treatment**:\n- **Nature**: Exchange (barter) of capital assets\n- **Taxable event**: Capital gains or losses\n- **Timing**: When the transaction is executed on-chain\n- **Tax base**: Disposal value (market value of the asset received) - Acquisition value (historical cost of the asset delivered)\n\n**Practical example**:\n`\nInitial purchase: 1 ETH at €2,000 (January 2024)\nSwap on Uniswap: 1 ETH → 3,500 USDC when ETH = €3,500 (March 2024)\nGas fee paid: 20 USDC\n\nTax calculation:\n- Disposal value: €3,500 - €20 (gas) = €3,480\n- Acquisition value: €2,000\n- Capital gain: €1,480\n- Tax (21% bracket): €310.80\n`\n\n**Common mistakes**:\n- Not reporting the swap because \"I still hold crypto\"\n- Not subtracting gas fees from the disposal value\n- Not applying FIFO if you have multiple ETH purchases\n\n### 2. Providing liquidity in pools (Liquidity Providing)\n\n**Operation**: Depositing two tokens (e.g. ETH + USDC) into a Uniswap pool to facilitate swaps and receiving LP tokens (Liquidity Provider) as a participation certificate.\n\n**Tax treatment** (interpretation applied by Cleriontax):\n- **At the time of deposit**: Exchange of ETH + USDC for LP tokens → **Generates a capital gain**\n- **LP tokens received**: New asset with acquisition value = market value of the assets deposited\n- **Accrued fees**: Investment income (19%-28%) when claimed\n\n**Practical example**:\n`\nDeposit into Uniswap ETH/USDC pool:\n- 1 ETH (bought at €2,000, now worth €3,000)\n- 3,000 USDC (bought at €1 each)\n- You receive: 100 UNI-V2 ETH/USDC tokens\n\nTax calculation for the deposit:\n- Gain on ETH: €3,000 - €2,000 = €1,000\n- Gain on USDC: €3,000 - €3,000 = €0\n- Total gain: €1,000 (to be reported)\n\nLP token acquisition value:\n- 100 UNI-V2 = €6,000 (€3,000 ETH + €3,000 USDC)\n- Unit value: €60/LP token\n`\n\n**Important**: This criterion is interpretative. Spanish regulations do not expressly regulate LP tokens. [Consult specialized tax advice](/es/servicios/asesoria-fiscal) to apply the most conservative criterion for your situation.\n\n### 3. Liquidity withdrawal (withdraw)\n\n**Operation**: Burning LP tokens to recover your share of the pool (now affected by impermanent loss and accumulated fees).\n\n**Tax treatment**:\n- **Burning LP tokens**: Disposal of the LP asset → Generates a gain/loss depending on current value vs acquisition value\n- **Tokens recovered**: The ETH/USDC tokens recovered have an acquisition value equal to their market value at the time of withdrawal\n- **Materialized impermanent loss**: If you recover less value than you deposited, it materializes as a capital loss\n\n**Practical example**:\n`\nLiquidity withdrawal from ETH/USDC pool:\n- You burn: 100 UNI-V2 tokens (acquisition value: €6,000)\n- You receive: 0.9 ETH (current value €3,500) + 3,150 USDC\n- Total value received: €3,150 + €3,150 = €6,300\n\nTax calculation:\n- Disposal value of LP tokens: €6,300\n- Acquisition value of LP tokens: €6,000\n- Gain: €300\n\nNew acquisition value:\n- 0.9 ETH acquired at €3,500/ETH = €3,150\n- 3,150 USDC acquired at €1/USDC = €3,150\n`\n\n### 4. Yield Farming (additional rewards)\n\n**Operation**: Receiving reward tokens (e.g. UNI, CAKE, CRV) for providing liquidity in pools.\n\n**Tax treatment**:\n- **Nature**: Investment income (similar to dividends)\n- **Tax point**: When you receive/claim the reward tokens\n- **Amount to report**: EUR market value of the token at the time you receive it\n- **Taxation**: 19%-28% depending on the savings tax base\n\n**Practical example**:\n`\nFarming on PancakeSwap (CAKE/BNB pool):\n- You provide liquidity for 3 months\n- You receive: 50 CAKE tokens as rewards\n- CAKE value at the time of receipt: €4/CAKE\n\nTax calculation:\n- Investment income: 50 × €4 = €200\n- Tax (19% bracket): €38\n\nCAKE acquisition value:\n- 50 CAKE acquired at €4 = €200 (for future sales)\n`\n\n**Important**: If you later sell the CAKE, you will apply FIFO using this acquisition value (€4/CAKE).\n\n### 5. Impermanent Loss\n\n**What it is**: Loss of value in liquidity pools when the price ratio between the two tokens changes. If you had simply held the tokens instead of depositing them, you would have more value.\n\n**AEAT tax treatment**:\n- **While funds remain in the pool**: NOT deductible (unrealized loss)\n- **Upon liquidity withdrawal**: It materializes as a capital loss if the recovered value < value deposited\n- **Offsetting**: The fees earned may partially offset the impermanent loss\n\n**Visual example**:\n`\nInitial situation:\n- You deposit: 1 ETH (€3,000) + 3,000 USDC = €6,000 total\n\nThree months later (ETH rises to €4,000):\n- If you had held: 1 ETH (€4,000) + 3,000 USDC = €7,000\n- Upon pool withdrawal: 0.866 ETH (€3,464) + 3,464 USDC = €6,928\n- Impermanent loss: €7,000 - €6,928 = €72\n- Fees earned: +€120\n- Net result: +€48\n\nTax calculation:\n- LP token gain: €6,928 - €6,000 = €928\n- Income (fees): €120\n- Total to report: €928 (capital gains) + €120 (investment income)\n`\n\n**Impermanent loss is NOT reported separately**, but is embedded in the calculation of gains/losses on the LP tokens.\n\n---\n\n## How to calculate capital gains on DEX operations\n\n**General formula** (same as for CEXs):\n`\nGain/Loss = Disposal Value - Acquisition Value - Costs\n`\n\n**Step 1: Identify all DEX transactions**\n\nUse blockchain explorers:\n- **Ethereum**: Etherscan.io → connect your wallet address\n- **Binance Smart Chain**: BSCScan.com\n- **Polygon**: PolygonScan.com\n- **Arbitrum**: Arbiscan.io\n\nFilter by:\n- Swaps on Uniswap, SushiSwap, 1inch\n- Deposits/withdrawals into liquidity pools\n- Reward claims\n\n**Step 2: Export transaction data**\n\nOptions:\n1. **Etherscan**: \"Export\" → CSV (limited to 5,000 tx in the free version)\n2. **Specialized tools**: [DeBank, Zerion, CoinTracking](/es/blog/herramientas-rastrear-criptomonedas) for multichain visualization\n3. **Blockchain APIs**: For very high volume (requires technical knowledge)\n\n**Step 3: Determine acquisition value (FIFO)**\n\nIf you bought the same token several times:\n1. Sort all purchases chronologically\n2. Match each sale to the oldest remaining purchase\n3. If you sell more than the amount in the oldest purchase, move on to the second oldest, and so on\n\n**FIFO example with DEX swaps**:\n`\nOperations:\n1. 10/01/2024: Buy 2 ETH at €2,000/ETH = €4,000 (Coinbase)\n2. 15/02/2024: Buy 1 ETH at €2,500/ETH = €2,500 (Binance)\n3. 20/03/2024: Swap on Uniswap: 2.5 ETH → DAI (ETH worth €3,000)\n\nFIFO calculation:\n- First 2 ETH sold → purchase of 10/01 (€2,000/ETH)\n  - Gain: (€3,000 - €2,000) × 2 = €2,000\n- Next 0.5 ETH sold → purchase of 15/02 (€2,500/ETH)\n  - Gain: (€3,000 - €2,500) × 0.5 = €250\n- Total gain: €2,250\n`\n\n**Step 4: Subtract gas fees**\n\nNetwork fees (gas) are **deductible**:\n- Gas paid in the transaction = Deductible cost\n- Reduces the disposal value\n\n`\nSwap: 1 ETH → 3,000 USDC\nGas fee: 0.005 ETH (€15 at the exchange rate at the time)\n\nDisposal value:\n- USDC received: €3,000\n- Gas paid: -€15\n- Net value: €2,985\n`\n\n**Step 5: Classify each transaction**\n\n[Correct classification of crypto transactions](/es/blog/clasificar-operaciones-criptomonedas) is critical:\n- **Swaps**: Capital gains/losses\n- **Providing liquidity**: Capital gains/losses (due to the swap)\n- **Farming rewards**: Investment income\n- **Transfers between own wallets**: No taxable event (internal movement)\n\n**Step 6: Apply IRPF brackets**\n\nSavings tax base (2025):\n- Up to €6,000: **19%**\n- €6,000 - €50,000: **21%**\n- €50,000 - €200,000: **23%**\n- €200,000 - €300,000: **27%**\n- More than €300,000: **28%**\n\n---\n\n## Tax differences between operating on DEX vs CEX\n\nAlthough they are equivalent from a tax standpoint, there are important practical differences:\n\n**Traceability and evidence**\n\n| Aspect | CEX (Binance, Coinbase) | DEX (Uniswap, PancakeSwap) |\n|---------|------------------------|---------------------------|\n| **Tax reports** | Some exchanges provide CSVs | You must reconstruct them yourself via the blockchain |\n| **EUR valuation** | Exchange shows historical EUR price | You must calculate the exchange rate at each moment |\n| **Evidence before AEAT** | Official exchange CSV | Transaction hash + Etherscan |\n| **Technical complexity** | Low (download CSV) | High (requires blockchain analysis) |\n| **KYC / identification** | Yes (exchange has your data) | No (but transactions are public) |\n\n**Practical implications**\n\n1. **Rebuilding transaction history**: Operating on DEX requires [advanced blockchain data analysis](/es/servicios/analisis-carteras) to correctly rebuild all operations.\n\n2. **Asset valuation**: You must determine the EUR value of each token at the exact time of the transaction using price APIs (CoinGecko, CoinMarketCap).\n\n3. **Gas fees**: On CEX, fees are clear. On DEX, you must convert gas paid in ETH/BNB to EUR.\n\n4. **Exotic tokens**: On DEX you can trade illiquid tokens not listed on CEX. Valuing illiquid tokens is complex from a tax perspective.\n\n5. **Form 721**: Both count towards the €50,000 threshold. Your funds in a MetaMask wallet with liquidity on Uniswap MUST be reported if they exceed the threshold.\n\n**Comparative example**:\n`\nCEX (Binance):\n- Swap BTC → USDT\n- Binance generates CSV: \"Sold 0.1 BTC at 60,000 USD = 54,545 EUR\"\n- You report: €54,545 as disposal value\n\nDEX (Uniswap):\n- Swap WBTC → USDC (same economic value)\n- Etherscan shows: \"Swapped 0.1 WBTC for 60,000 USDC, gas: 0.01 ETH\"\n- You must calculate:\n  - EUR value of 60,000 USDC at that time\n  - EUR value of 0.01 ETH (gas)\n  - Applicable USD/EUR exchange rate\n- You report: manually calculated value\n`\n\n---\n\n## Main DEX protocols and their tax peculiarities\n\n### Uniswap (Ethereum, Polygon, Arbitrum)\n\n**Characteristics**:\n- Leading DEX on Ethereum\n- V3 version with concentrated liquidity\n- High gas fees on Ethereum mainnet\n\n**Tax peculiarities**:\n- **Concentrated liquidity V3**: The NFTs representing positions are NOT standard LP tokens. For tax purposes they are treated as NFTs + an economic right over the pool.\n- **Multiple fee tiers**: Pools with 0.05%, 0.3%, 1% fees. This affects yields.\n- **Multichain**: Operating on Uniswap Polygon vs Ethereum requires separate tracking.\n\n### PancakeSwap (Binance Smart Chain)\n\n**Characteristics**:\n- Main DEX on BSC\n- Very low gas fees (cents in BNB)\n- Farming of the CAKE token\n\n**Tax peculiarities**:\n- **Syrup pools**: Staking CAKE to receive other tokens. For tax purposes = investment income.\n- **Lottery and Predictions**: Gains would be taxed as capital gains or income depending on the interpretation.\n- **Auto-compounding**: Vaults that auto-reinvest. Each reinvest technically triggers a taxable event.\n\n### Curve Finance (multiple chains)\n\n**Characteristics**:\n- Specialized in stablecoins\n- Low slippage for large volumes\n- veCRV (vote-escrowed CRV) for governance\n\n**Tax peculiarities**:\n- **Stablecoin pools**: Swaps USDC → USDT generate a gain close to €0, but they are still taxable events.\n- **CRV lock**: Locking CRV for 4 years to receive veCRV. Tax-wise it is a conversion CRV → veCRV (swap).\n- **Reward boost**: Getting higher rewards requires veCRV. The extra rewards are still taxed as income.\n\n### Balancer (Ethereum, Polygon, Arbitrum)\n\n**Characteristics**:\n- Pools with multiple tokens (not just pairs)\n- Configurable weight (e.g. 80% ETH / 20% USDC)\n- BAL token as reward\n\n**Tax peculiarities**:\n- **Multi-asset pools**: Depositing 4 different tokens = 4 simultaneous swaps. Complex calculation.\n- **Automatic rebalancing**: The pool rebalances weights. For tax purposes it occurs within the LP token and does not generate individual events.\n- **Liquidity mining**: Receiving BAL is taxed as income.\n\n---\n\n## Full practical cases with DEX calculations\n\n### Case 1: Active trader on Uniswap (swaps only)\n\n**Profile**: Trader who makes frequent swaps on Uniswap V2.\n\n**Operations 2024**:\n1. January: Buy 5 ETH at €2,000/ETH = €10,000\n2. February: Swap on Uniswap: 2 ETH → 5,500 USDC (ETH = €2,750, gas 0.015 ETH = €40)\n3. March: Swap on Uniswap: 5,500 USDC → 2.1 ETH (ETH = €2,600, gas 0.012 ETH = €30)\n4. April: Sell 3 ETH on Coinbase at €3,000/ETH = €9,000\n\n**Tax calculation**:\n\n**Operation 2 (Feb - ETH → USDC)**:\n`\nDisposal value: €5,500 - €40 (gas) = €5,460\nAcquisition value (FIFO): 2 ETH × €2,000 = €4,000\nGain: €1,460\n\nNew state:\n- 3 ETH remaining (acquisition value: €2,000/ETH)\n- 5,500 USDC (acquisition value: €5,460 total = €0.9927/USDC)\n`\n\n**Operation 3 (Mar - USDC → ETH)**:\n`\nDisposal value: 5,500 USDC × €0.9927 = €5,460\nGas in ETH: 0.012 ETH × €2,600 = €31.2\nNet disposal value: €5,460 - €31.2 = €5,428.8\n\nUSDC acquisition value: €5,460\nLoss: €31.2 (gas only)\n\nNew state:\n- 3 old ETH (acquisition value: €2,000/ETH)\n- 2.1 new ETH (acquisition value: €5,428.8 / 2.1 = €2,585/ETH)\n`\n\n**Operation 4 (Apr - ETH → EUR)**:\n`\nSale of 3 ETH at €3,000/ETH = €9,000\n\nFIFO: First 3 ETH are the old ones (€2,000/ETH)\nGain: (€3,000 - €2,000) × 3 = €3,000\n`\n\n**Total year 2024**:\n- Gains: €1,460 + €3,000 = €4,460\n- Losses: €31.2\n- **Net gain: €4,428.8**\n- **Tax (19%): €841.47**\n\n### Case 2: Liquidity provider on PancakeSwap with farming\n\n**Profile**: Investor who provides liquidity in CAKE/BNB pool for 6 months.\n\n**Operations 2024**:\n1. January: Buy 10 BNB at €300/BNB = €3,000\n2. January: Buy 150 CAKE at €20/CAKE = €3,000\n3. February: Deposit into CAKE/BNB pool:\n   - 10 BNB (now worth €350/BNB)\n   - 150 CAKE (now worth €18/CAKE)\n   - You receive 1,000 CAKE-BNB LP tokens\n4. February-July: You accumulate 25 CAKE as rewards (average value €15/CAKE)\n5. August: Withdraw liquidity:\n   - You burn 1,000 LP tokens\n   - You receive 8 BNB (value €400/BNB) + 180 CAKE (value €12/CAKE)\n6. September: You sell everything for EUR\n\n**Tax calculation**:\n\n**Operation 3 (Liquidity deposit)**:\n`\nBNB disposal:\n- Disposal value: 10 BNB × €350 = €3,500\n- Acquisition value: 10 BNB × €300 = €3,000\n- Gain: €500\n\nCAKE disposal:\n- Disposal value: 150 CAKE × €18 = €2,700\n- Acquisition value: 150 CAKE × €20 = €3,000\n- Loss: €300\n\nNet gain on deposit: €200\n\nLP tokens:\n- Acquisition value: €3,500 + €2,700 = €6,200\n`\n\n**Operation 4 (Farming rewards)**:\n`\nInvestment income:\n- 25 CAKE × €15 = €375\n- Taxation: 19% × €375 = €71.25\n\nCAKE rewards acquisition value: €375 total\n`\n\n**Operation 5 (Liquidity withdrawal)**:\n`\nLP token disposal:\n- Disposal value: (8 BNB × €400) + (180 CAKE × €12)\n  = €3,200 + €2,160 = €5,360\n- Acquisition value: €6,200\n- Loss: €840\n\nNew asset acquisition value:\n- 8 BNB at €400/BNB = €3,200\n- 180 CAKE at €12/CAKE = €2,160\n- 25 CAKE (rewards) at €15/CAKE = €375\n`\n\n**Operation 6 (Sale to EUR)**:\n`\nBNB sale:\n- 8 BNB × €400 = €3,200 (acquisition value = sale value)\n- Gain: €0\n\nCAKE sale:\n- 180 CAKE × €12 = €2,160 (acquisition value = sale value)\n- 25 CAKE × €12 = €300 (acquisition value = €375)\n- Loss: €75\n`\n\n**Summary year 2024**:\n- Capital gains: €200 (deposit)\n- Capital losses: €840 (withdrawal) + €75 (sale) = €915\n- **Net capital loss: €715** (offsettable against other gains)\n- Investment income: €375\n- **Tax on income: €71.25**\n\n**Tax result**: Capital loss of €715 (reduces tax on other gains) + income of €375.\n\n### Case 3: Multichain operator with impermanent loss\n\n**Profile**: Advanced user operating on Ethereum, Polygon and Arbitrum.\n\n**Operations 2024**:\n1. January: Buy 5 ETH at €2,500/ETH = €12,500 (Coinbase)\n2. February: Bridge 3 ETH to Polygon (gas 0.02 ETH = €50)\n3. February: Swap on Uniswap Polygon: 3 ETH → 8,000 USDC (ETH = €2,666)\n4. March: Provide liquidity on Curve Polygon: 8,000 USDC + bridge additional 8,000 USDC\n5. June: Withdraw Curve liquidity: receive 16,500 USDC (gain from pool fees)\n6. July: Bridge 16,500 USDC to Ethereum (gas €25)\n7. August: Swap on Uniswap mainnet: 16,500 USDC → 5.2 ETH (ETH = €3,100)\n\n**Tax calculation**:\n\n**Operation 2 (Bridge ETH → Polygon)**:\n`\nBridge does NOT trigger a taxable event (same asset, different chain)\nBut gas IS a deductible cost:\n- Gas: €50 → Added to the acquisition cost of the ETH on Polygon\n- ETH Polygon acquisition value: (3 × €2,500) + €50 = €7,550\n`\n\n**Operation 3 (Polygon ETH → USDC swap)**:\n`\nDisposal value: 8,000 USDC = €8,000\nAcquisition value: €7,550\nGain: €450\n`\n\n**Operations 4-5 (Curve liquidity)**:\n`\nDeposit:\n- 8,000 USDC (acquisition value: €8,000)\n- 8,000 bridged USDC (acquisition value: €8,000 + bridge gas)\n- Total: €16,000 + gas\n\nWithdrawal:\n- You receive 16,500 USDC\n- Gain: €500 (approx., minus gas)\n`\n\n**Operation 6 (Bridge USDC → Ethereum)**:\n`\nBridge does NOT trigger a taxable event\n€25 gas is added to the acquisition cost of USDC on mainnet\n`\n\n**Operation 7 (USDC → ETH swap)**:\n`\nDisposal value: €16,500 + €25 (bridge gas) = €16,525\nAcquisition value of ETH received:\n- 5.2 ETH with acquisition value = €16,525\n- = €3,178/ETH\n\nNo gain on this swap (USDC → ETH with no gain since USDC is stable)\n`\n\n**Total year 2024**:\n- Polygon swap gain: €450\n- Curve pool gain: €500 (accrued fees)\n- **Total gain: €950**\n- **Tax (19%): €180.50**\n\n**Final state**:\n- 2 original ETH (acquisition value: €2,500/ETH)\n- 5.2 ETH from the final swap (acquisition value: €3,178/ETH)\n\n---\n\n## Common tax mistakes when operating on DEX\n\nThese are the most costly mistakes we see in [analysis of complex DeFi portfolios](/es/servicios/analisis-carteras):\n\n**Error 1: \"I haven't sold to EUR, it doesn't get taxed\"**\n\n**Wrong belief**: Swaps on Uniswap are not taxable because you remain in crypto.\n\n**Tax reality**: Every swap is an exchange that generates capital gains/losses.\n\n**Consequence**: Dozens or hundreds of unreported operations. Penalty of 50%-150% + interest.\n\n---\n\n**Error 2: \"DEX transactions are not traceable\"**\n\n**Wrong belief**: Operating on Uniswap without KYC makes you fiscally invisible.\n\n**Tax reality**: All transactions are public on the blockchain. The AEAT can trace your wallet if it identifies a single connection with your identity (withdrawal to an exchange, NFT purchase with your data, etc.).\n\n**Consequence**: False sense of security. Once the Tax Agency links your wallet, it sees the ENTIRE history.\n\n---\n\n**Error 3: \"LP tokens are not taxed until I sell them\"**\n\n**Wrong belief**: Depositing into a liquidity pool is like a bank deposit.\n\n**Tax reality**: Depositing ETH + USDC on Uniswap is an EXCHANGE (ETH + USDC → LP tokens) that generates a gain if the market value has changed since your purchase.\n\n**Consequence**: Unreported gain at the time of deposit.\n\n---\n\n**Error 4: \"Impermanent loss is deductible\"**\n\n**Wrong belief**: If you lose due to impermanent loss, you can immediately deduct that loss.\n\n**Tax reality**: The loss only materializes when you WITHDRAW liquidity. While funds remain in the pool, it is not deductible.\n\n**Consequence**: Reporting unrealized losses (not accepted by AEAT).\n\n---\n\n**Error 5: \"I don’t subtract gas fees because they’re small\"**\n\n**Wrong belief**: Gas fees of €10-€50 are not worth calculating.\n\n**Tax reality**: Gas fees are DEDUCTIBLE expenses. Over hundreds of transactions, they can add up to thousands of euros.\n\n**Consequence**: Paying more tax than you should.\n\n**Example**: 200 transactions × €30 average gas = €6,000 of non-deducted expenses = €1,260 excess tax (at 21%).\n\n---\n\n**Error 6: \"I use global FIFO, not per token\"**\n\n**Wrong belief**: I apply FIFO to all my crypto as a single asset.\n\n**Tax reality**: FIFO is applied **separately to each token**. Each ETH, each USDC, each CAKE has its own FIFO.\n\n**Consequence**: Incorrect gain calculations.\n\n---\n\n**Error 7: \"Airdrops/rewards are not taxed\"**\n\n**Wrong belief**: Tokens received for free (UNI airdrop, CAKE farming) are not taxed.\n\n**Tax reality**: They are taxed as investment income at market value at the time you receive them.\n\n**Consequence**: Unreported income. Penalty + interest on unpaid tax.\n\n---\n\n**Error 8: \"Transfers between my wallets are taxed\"**\n\n**Wrong belief**: Moving ETH from MetaMask to Ledger generates a gain.\n\n**Tax reality**: Transfers between wallets you own DO NOT trigger a taxable event (internal movement).\n\n**Consequence**: Reporting non-existent gains, paying excess tax.\n\n**Important**: You must be able to PROVE that both wallets are yours (control of keys, consistent history).\n\n---\n\n## What to do if you have not reported DEX operations\n\nIf you operated on Uniswap, PancakeSwap or other DEXs and did not report it, you have options:\n\n**Option 1: Amended tax return (until June 30 of the following year)**\n\n**Applicable if**: The filing deadline for the tax year has not yet passed.\n\n**Procedure**:\n1. Rebuild all DEX transactions for the tax year\n2. Calculate gains/losses using FIFO\n3. File an amended return in Renta Web (AEAT)\n4. Pay the tax difference + late payment interest (4% per year)\n\n**Additional cost**: Only interest, no penalty if filed voluntarily.\n\n---\n\n**Option 2: Late return (after June 30, without prior notice)**\n\n**Applicable if**: The deadline has passed but the Tax Agency has not contacted you yet.\n\n**Procedure**:\n1. Rebuild full history of DEX operations\n2. File a voluntary late return\n3. Pay tax + interest + surcharge:\n   - 5% if filed within 3 months after the deadline\n   - 10% between 3-6 months\n   - 15% between 6-12 months\n   - 20% after 12 months\n\n**Advantage**: Avoids formal penalty (50%-150%) if done before a formal notice.\n\n---\n\n**Option 3: Regularization after AEAT notice**\n\n**Situation**: The Tax Agency sends you a letter or starts an audit.\n\n**Consequences**:\n- Unpaid tax\n- Late payment interest (4% per year from the due date)\n- **Penalty of 50%-150%** depending on seriousness:\n  - 50%: Minor infringement (no concealment)\n  - 100%: Serious infringement (concealment of means of payment)\n  - 150%: Very serious infringement (use of tax havens, complex structures)\n- 30% reduction if you accept, do not appeal and pay within the voluntary period\n\n**Total cost example**:\n`\nUnpaid tax: €10,000\nInterest for 2 years (4%): €800\nSerious penalty 100% with reduction: €7,000\nTotal: €17,800\n`\n\n---\n\n**Option 4: Preventive analysis and strategy**\n\n**Recommended if**:\n- You have hundreds or thousands of DEX transactions\n- You operated on multiple chains\n- You don’t know if you exceeded the €50,000 threshold (Form 721)\n- You received complex airdrops, farming rewards\n\n**Procedure**:\n1. [Request a DeFi portfolio analysis](/es/servicios/analisis-carteras) from specialists\n2. Complete reconstruction of blockchain history\n3. Calculation of pending tax obligations\n4. Regularization strategy minimizing penalties\n5. Coordinated filing of returns\n\n**Advantage**: Minimizes risk, optimizes total tax cost, avoids mistakes that worsen penalties.\n\n---\n\n## Form 721 and DeFi operations: Do I have to report my wallet funds?\n\n**Frequent question**: If I have €80,000 in my MetaMask wallet with positions on Uniswap, do I need to file Form 721?\n\n**Answer: YES**, with nuances.\n\n**Legal basis**:\n\nForm 721 requires reporting **cryptocurrencies held abroad**. The AEAT considers \"abroad\":\n- Non-Spanish centralized exchanges (Binance, Coinbase, Kraken)\n- **Non-custodial wallets with funds in foreign protocols**\n\n**Applied criterion**:\n\nIf your wallet holds:\n- ETH on Ethereum (blockchain run by international nodes)\n- Liquidity on Uniswap (protocol deployed on an international public blockchain)\n- Positions in Curve, Aave, etc.\n\n→ **It is considered \"abroad\"** because smart contracts are on a public international blockchain, not in Spain.\n\n**Threshold**: €50,000\n\n**Calculating the balance on December 31**:\n`\nExample:\n- 15 ETH in MetaMask wallet: 15 × €3,500 = €52,500\n- 10,000 USDC in Curve pool: €10,000\n- 500 Uniswap LP tokens (underlying value): €8,000\n- Total: €70,500\n\n→ EXCEEDS €50,000 → Form 721 obligation\n`\n\n**DeFi particularities**:\n\n1. **LP tokens**: Report the underlying pool value, not the number of LP tokens.\n   - Example: 1,000 UNI-V2 ETH/USDC representing 5 ETH + 15,000 USDC\n   - Amount to report: (5 × €3,500) + €15,000 = €32,500\n\n2. **Staking in protocols**: If you have staked ETH on Lido (stETH), it counts.\n\n3. **Lending**: If you deposited USDC in Aave and hold aUSDC, it counts.\n\n4. **NFTs**: Uniswap V3 NFT positions are valued by underlying assets.\n\n**Filing deadline**: Until **March 31** of the following year.\n\n**Penalty for not filing**:\n- Minimum: €10,000\n- Maximum: 150% of the unreported balance\n- Statute of limitations extended to **10 years** (instead of 4)\n\n**Example penalty**:\n`\nUnreported balance: €70,500\nPenalty: €10,000 (minimum)\n\nIf you also concealed related capital gains:\nStatute of limitations: 10 years (they can review very old years)\n`\n\n**Recommendation**: If your total crypto balance (CEX + DEX + wallets) exceeds €45,000 at year-end, consult with [specialized tax advice](/es/servicios/asesoria-fiscal) to assess preventive filing of Form 721.\n\n---\n\n## Tools to track and calculate DeFi taxes\n\nTracking DEX operations manually is unfeasible at high volume. These tools help:\n\n**Level 1: Basic visualization (free)**\n\n**DeBank** (debank.com)\n- Connect wallets (MetaMask, Ledger, etc.)\n- View real-time positions on 50+ chains\n- Shows liquidity pools, lending, staking\n- Basic transaction history\n- **Does NOT calculate taxes** automatically\n\n**Zerion** (zerion.io)\n- Similar to DeBank\n- More visual interface\n- Multichain portfolio tracking\n- **NOT adapted to Spanish tax rules**\n\n**Tax use**: Identify which protocols you used and approximate balances. You must then calculate taxes manually.\n\n---\n\n**Level 2: Data export (free/limited)**\n\n**Etherscan / BSCScan / PolygonScan**\n- Export CSV of your wallet transactions\n- Limit: 5,000 transactions in the free version\n- Requires subsequent manual analysis\n- **Advantage**: Primary official source (blockchain)\n\n**Tax use**: Export CSVs, then process them with Excel/Python or send to your tax advisor.\n\n---\n\n**Level 3: Tax calculation software (paid, not adapted to Spain)**\n\n**CoinTracking** (cointracking.info)\n- Imports transactions from exchanges and wallets\n- Calculates gains/losses\n- **Problem**: Uses generic FIFO/LIFO methods, not adapted to Spanish AEAT criteria\n- **Cost**: From €10/month\n\n**Koinly** (koinly.io)\n- Similar to CoinTracking\n- Basic DeFi support (detects swaps, some pools)\n- **Problem**: US/UK tax classification, not Spain\n- **Risk**: Tax reports incorrect for AEAT\n\n**Tax use**: Useful for operation inventory, but **requires review by a Spanish tax advisor** before filing.\n\n---\n\n**Level 4: Specialized professional analysis (paid, AEAT-adapted)**\n\n**Cleriontax - [DeFi Portfolio Analysis](/es/servicios/analisis-carteras)**\n- Full reconstruction of multichain history\n- Classification according to Spanish AEAT criteria\n- Proper FIFO applied per token\n- Gas fees automatically deducted\n- LP tokens correctly valued\n- Farming rewards treated as investment income\n- Auditable reports for Form 100\n- Review by a chartered tax advisor\n\n**Tax use**: Complete solution to [report complex DeFi operations](/es/blog/fiscalidad-defi-espana) in full compliance with AEAT.\n\n---\n\n**Quick comparison**\n\n| Tool | Cost | Adapted to Spain | Advanced DeFi | Recommended for |\n|-------------|-------|----------------|---------------|------------------|\n| DeBank | Free | No | Yes | Portfolio visualization |\n| Etherscan CSV | Free | No | Partial | Raw data export |\n| CoinTracking | €10/month | No | Partial | Operation inventory |\n| Koinly | €50/year | No | Yes | Informal pre-analysis |\n| Cleriontax | Variable | **Yes** | **Yes** | AEAT tax filing |\n\n**Recommendation**:\n- **< 50 transactions**: Etherscan + Excel + [reporting guide](/es/blog/como-declarar-criptomonedas-renta-2025)\n- **50-200 transactions**: CoinTracking for inventory + advisor review\n- **> 200 transactions or complex DeFi**: [Full professional analysis](/es/servicios/analisis-carteras)\n\n---\n\n## Regulatory future: MiCA and DAC8 will affect DEX\n\n**MiCA regulation (Markets in Crypto-Assets)**\n\nComes into force progressively in 2024-2025 in the EU.\n\n**Impact on DEX**:\n- MiCA mainly regulates centralized exchanges and stablecoin issuers\n- **Decentralized protocols without a legal entity** (Uniswap, Curve) remain in a grey area\n- Web interfaces that access protocols (uniswap.org) could require licenses\n\n**Tax consequences**:\n- MiCA does NOT change taxation (this is a national competence)\n- But it may force geoblocking of interfaces in Europe\n- Users will still be able to operate directly via contracts\n\n---\n\n**DAC8 Directive (automatic crypto reporting)**\n\nMandatory from 2026.\n\n**What it is**: Exchanges and crypto service providers must automatically report user operations to tax authorities.\n\n**Impact on DEX**:\n- CEX (Binance, Coinbase): Report all your operations to the AEAT\n- **DEX without KYC**: Cannot report because they don’t know your identity\n- **BUT**: Tax authorities can analyze the blockchain and cross-reference data\n\n**Flow example**:\n`\n1. You buy ETH on Coinbase (reported to AEAT via DAC8)\n2. You withdraw to MetaMask (Coinbase reports the withdrawal)\n3. You operate on Uniswap from MetaMask (not reported)\n4. AEAT cross-checks data:\n   - They know you bought X ETH\n   - They know you withdrew to wallet address ABC\n   - They can track wallet ABC on Etherscan\n   - They see all your Uniswap swaps\n   - They ask you for explanations\n`\n\n**Consequence**: Even if DEX do not report, your operations are traceable if there is any touchpoint with your identity.\n\n---\n\n**Near future (2025-2027)**\n\n**Likely scenario**:\n1. **DAC8 fully operational**: AEAT receives automatic reports from all CEXs\n2. **Cross-checking with the blockchain**: Blockchain analytics tools (Chainalysis, Elliptic) help AEAT track wallets\n3. **Mass notices**: Investors who used DEX receive letters from the Tax Agency requesting explanations\n4. **Reverse burden of proof**: You will have to prove that you filed correctly\n\n**Recommendation**: File correctly from now on. In 2-3 years, the opacity of DEX will be history.\n\n**Recommended actions**:\n- If you operated on DEX in 2020-2024 and did not report: Consider voluntary regularization options\n- If you operate now: Keep ongoing tracking, don’t wait until 2026\n- If you have high volume: Use [continuous tax advice](/es/servicios/asesoria-fiscal) for preventive compliance\n\n---\n\n## FAQ: Taxation of DEX protocols in Spain\n\n### Does doing a swap on Uniswap get taxed in Spain?\n\n**Yes.** Exchanging any cryptocurrency for another on Uniswap (or any DEX) generates a capital gain or loss that must be reported in Form 100 (IRPF). Tax-wise it is identical to doing a swap on Binance.\n\n### Do I have to report if I only operate on DEX without KYC?\n\n**Yes.** The absence of KYC does not remove your tax obligation. All DEX transactions are recorded on the public blockchain and the AEAT can trace them using data analysis. Operating without KYC does not make you fiscally invisible.\n\n### How is providing liquidity in a Uniswap pool taxed?\n\n**At the time of deposit**, it is considered an exchange (you deliver ETH + USDC and receive LP tokens) that generates a capital gain if the market value of the assets has changed since you bought them. When you withdraw liquidity, the disposal of LP tokens generates another gain/loss. Fees accrued in the pool are taxed as investment income.\n\n### Is impermanent loss tax-deductible?\n\n**Only when you realize the loss** by withdrawing liquidity from the pool. While your funds remain deposited in the pool, impermanent loss is a potential, unrealized loss and you cannot deduct it. Upon withdrawal, if the recovered value is lower than the deposited value (net of fees), the loss materializes.\n\n### How do I calculate the EUR value of a token with no liquidity on exchanges?\n\n**Use the DEX price** at the time of the transaction, converted to EUR at the exchange rate at that time. For very illiquid tokens, you can use the actual transaction value (how much USDC/ETH you received when selling it). Always document your valuation methodology in case the Tax Agency asks for justification.\n\n### Do I need to report DEX transactions under €50?\n\n**Technically yes**, every capital gain must be reported regardless of the amount. In practice, very small transactions can be aggregated. But note that hundreds of micro-operations can add up to thousands of euros in total gains, so systematically omitting them does create significant tax risk.\n\n### Are gas fees deductible from the disposal value?\n\n**Yes.** Network fees (gas fees paid in ETH, BNB, etc.) are costs directly related to the transaction and reduce the disposal value of the asset. You must convert the gas paid to euros at the exchange rate at the time of the transaction and subtract it.\n\n### Do transfers of crypto between my own wallets get taxed?\n\n**No.** Moving assets between wallets you own is an internal movement with no taxable event. But you must be able to prove that both wallets are yours (control of private keys, consistent usage patterns). Gas paid on these internal transfers can be added to the acquisition cost of the asset.\n\n### Is operating on PancakeSwap (BSC) taxed differently than on Uniswap (Ethereum)?\n\n**No.** From a tax perspective, the blockchain does not matter. A swap on PancakeSwap is taxed exactly the same as a swap on Uniswap. The only practical difference is that BSC has much lower gas fees, which makes tracking easier (fewer expenses to deduct) but does not change the tax treatment of gains.\n\n### How do I prove the value of a DEX operation to the Tax Agency?\n\n**Provide**: 1) The on-chain transaction hash (verifiable on Etherscan/BSCScan), 2) A screenshot of the blockchain explorer showing the tokens swapped, 3) The EUR token price in recognized sources (CoinGecko, CoinMarketCap) at the exact date/time of the transaction, 4) The USD/EUR exchange rate used. All this information is auditable and sufficient to justify valuations.\n\n### Do I have to file Form 721 for funds in my MetaMask wallet?\n\n**Yes**, if the total value of your cryptocurrencies in wallets + foreign exchanges exceeds €50,000 on December 31. Funds in non-custodial wallets with positions in international DeFi protocols (Uniswap, Curve, Aave) are considered \"abroad\". Include in the calculation the underlying value of LP tokens, lending positions, etc.\n\n### How do I apply FIFO to multichain operations?\n\n**FIFO is applied per token**, regardless of the blockchain. If you bought ETH on Ethereum and later on Polygon, when you sell/swap ETH on Polygon, you must match the sale with the oldest ETH (the one on Ethereum) under FIFO. Each token (ETH, USDC, BNB) has its own separate FIFO queue.\n\n### What should I do if I already operated on DEX in previous years and did not report it?\n\n**You have options**: 1) Amended return (if the tax year deadline has not closed), 2) Voluntary late return (after the deadline, but before any notice), 3) Wait for a notice (risky, high penalties). The most advisable is to request a [DeFi portfolio analysis](/es/servicios/analisis-carteras) to compute pending obligations and design a regularization strategy that minimizes penalties.\n\n### Can I use software like Koinly or CoinTracking to file taxes in Spain?\n\n**With caution.** These tools are useful for inventorying operations, but they are NOT adapted to Spanish tax criteria (Spanish FIFO method, AEAT classification, Form 100). Their tax reports are designed for the US/UK. Use them for tracking, but review calculations with a Spanish tax advisor before filing.\n\n### Are yield farming rewards taxed as capital gains or income?\n\n**As investment income** (19%-28% depending on bracket). Tokens you receive as farming rewards (e.g. UNI, CAKE, CRV) are taxed at their market value at the time you receive them. If you later sell those tokens, the additional gain/loss is taxed as a capital gain applying FIFO from the initial acquisition value (value when you received them).\n\n---\n\n## Conclusion: Tax compliance in DeFi requires specialized advice\n\nOperating on DEX protocols like Uniswap, PancakeSwap or Curve introduces tax complexities that **do not exist in traditional finance**: LP tokens, impermanent loss, multichain farming, transactions with no centralized records.\n\n**Key takeaways**:\n\n1. **Every DEX swap is taxable** just like on centralized exchanges, with no exceptions\n2. **Providing liquidity generates multiple taxable events**: at deposit (swap), as fees accrue (income) and at withdrawal (LP disposal)\n3. **Not reporting because you operate without KYC is a serious mistake**: the blockchain is transparent, AEAT can trace it\n4. **Gas fees are deductible** and can amount to thousands of euros in tax savings\n5. **FIFO is applied per token**, regardless of which blockchain you use\n6. **Form 721 is mandatory** if your DeFi funds exceed €50,000\n7. **Automatic tools** (Koinly, CoinTracking) are NOT adapted to Spanish AEAT criteria\n8. **Voluntary regularization** is always cheaper than waiting for a Tax Agency notice\n\n**Recommended next steps**:\n\n- **If you operated on DEX and did not report**: [Request an analysis of your portfolio](/es/servicios/analisis-carteras) to assess pending obligations and a regularization strategy\n- **If you plan to operate in DeFi**: Implement tracking from the start or consult [preventive tax advice](/es/servicios/asesoria-fiscal)\n- **If you are unsure about your current return**: Review with [certified tax filings](/es/servicios/liquidaciones-fiscales) to ensure your FIFO calculations are correct\n\nRegulation is advancing (DAC8, MiCA) and the room to operate in the grey area is closing. **Filing correctly from now on** protects you from future penalties and extended statutes of limitations (10 years without Form 721).\n\n---\n\n## Have you operated on Uniswap, PancakeSwap or Curve and are not sure you reported correctly?\n\nDon’t wait for a Tax Agency notice. Preventive analysis can save you thousands of euros in penalties.\n\n**Cleriontax - DeFi Tax Specialists**\n\nOur team combines blockchain data engineering with chartered tax advice to rebuild your full history of DEX operations:\n\n- Multichain analysis (Ethereum, BSC, Polygon, Arbitrum, Optimism, etc.)\n- Classification of swaps, liquidity pools, farming, bridging\n- Certified FIFO calculation according to AEAT criteria\n- Correct valuation of LP tokens and impermanent loss\n- Gas fees automatically deducted\n- Auditable reports ready for Form 100\n- Review by a chartered tax advisor\n\n**Specialized DeFi services:**\n\n- **[Complex DeFi Portfolio Analysis](/es/servicios/analisis-carteras)**: Full reconstruction of multichain history\n- **[Certified Tax Filings](/es/servicios/liquidaciones-fiscales)**: Forms 100, 721 ready to file\n- **[Ongoing Tax Advisory](/es/servicios/asesoria-fiscal)**: Support throughout the entire process\n\n[**Request a free analysis of your case →**](/es/contacto)\n\nWe analyze your situation within 24-48h and provide a no-obligation quote."
}
